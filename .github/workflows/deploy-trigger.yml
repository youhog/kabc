name: Workflow 檔更新時觸發部署

on:
  push:
    branches:
      - '**'                     # ✅ 所有分支
    paths:
      - '.github/workflows/**'   # ✅ 只監聽 workflow 變更

jobs:
  trigger-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: 顯示觸發資訊
        run: |
          echo "🧩 分支: ${{ github.ref }}"
          echo "🧾 Commit 訊息: ${{ github.event.head_commit.message }}"
          echo "📂 推送者: ${{ github.actor }}"

      - name: 呼叫 static.yml 進行部署
        uses: peter-evans/workflow-dispatch@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repository: ${{ github.repository }}
          workflow: static.yml
          ref: ${{ github.ref }}
